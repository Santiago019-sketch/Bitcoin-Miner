-- Cleanup any existing GUI
local CoreGui = game:GetService("CoreGui")
if CoreGui:FindFirstChild("BCMX Hub") then
    CoreGui:FindFirstChild("BCMX Hub"):Destroy()
end

-- Load UI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()

-- Create Window
local Window = Library.CreateLib("BCMX Hub", "DarkTheme")

-- Services
local RS = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LP = Players.LocalPlayer

-- Main Tab
local MainTab = Window:NewTab("Main")
local MainSection = MainTab:NewSection("Auto Farm")

-- Variables
local AutoEnabled = false
local BitcoinAmount = 50

-- Bitcoin Functions
MainSection:NewToggle("Auto Bitcoin", "Automatically exchanges Bitcoin", function(state)
    AutoEnabled = state
    while AutoEnabled do
        RS.Events.ExchangeMoney:FireServer(true)
        task.wait(0.1)
    end
end)

MainSection:NewSlider("Exchange Amount", "Amount of Bitcoin to exchange", 1000, 1, function(v)
    BitcoinAmount = v
end)

MainSection:NewButton("Exchange Bitcoin", "Exchange Bitcoin once", function()
    for i = 1, BitcoinAmount do
        RS.Events.ExchangeMoney:FireServer(true)
        task.wait(0.1)
    end
end)

-- Player Tab
local PlayerTab = Window:NewTab("Player")
local PlayerSection = PlayerTab:NewSection("Local Player")

-- Walk Speed
PlayerSection:NewSlider("Walk Speed", "Changes your walk speed", 100, 16, function(v)
    if LP.Character and LP.Character:FindFirstChild("Humanoid") then
        LP.Character.Humanoid.WalkSpeed = v
    end
end)

-- Remove Barriers
PlayerSection:NewButton("Remove Barriers", "Removes level barriers", function()
    for _, v in pairs(workspace:GetChildren()) do
        if v:FindFirstChildOfClass("TouchTransmitter") and v:FindFirstChildOfClass("SurfaceGui") then
            v:Destroy()
        end
    end
end)

-- Credits Tab
local CreditsTab = Window:NewTab("Credits")
local CreditsSection = CreditsTab:NewSection("Credits")

CreditsSection:NewLabel("Original by Midnight Hub")
CreditsSection:NewLabel("Modified Version")

-- Protection
local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt, false)
mt.__namecall = newcclosure(function(...)
    local args = {...}
    if getnamecallmethod() == "Kick" then
        return
    end
    return old(...)
end)
setreadonly(mt, true)

-- Keep UI Elements Updated
game:GetService("RunService").RenderStepped:Connect(function()
    if LP.Character and LP.Character:FindFirstChild("Humanoid") then
        -- Keep WalkSpeed Updated
        if _G.WalkSpeedValue then
            LP.Character.Humanoid.WalkSpeed = _G.WalkSpeedValue
        end
    end
end)

-- Keybinds
local UserInputService = game:GetService("UserInputService")
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.RightShift then  -- Right Shift to toggle UI
        Library:ToggleUI()
    end
end)

-- Notification
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "BCMX Hub Loaded",
    Text = "Press Right-Shift to toggle",
    Duration = 5
})
